# Shadowrocket: 2025-08-11 21:58:59
# chatgpt 修改版本

[General]
bypass-system = true
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

# DNS
dns-server = 119.29.29.29,114.114.114.114,223.5.5.5,8.8.8.8,1.1.1.1,system
fallback-dns-server = 8.8.8.8,1.1.1.1,system

# IPv6
ipv6 = false
prefer-ipv6 = false

# DNS behavior
dns-fallback-system = false
dns-direct-system = false
private-ip-answer = false

# Connectivity
icmp-auto-reply = true
always-reject-url-rewrite = false

[Proxy Group]
# —— Main ——
🚀 Strategy-Select = select, ♻️ ALL, 🌐 Global-Direct, 🇭🇰 HongKong, 🇨🇳 Taiwan, 🇯🇵 Japan, 🇸🇬 Singapore, 🇺🇸 UnitedStates, 🇬🇧 UnitedKingdom, 🇰🇷 Korea, 🇷🇺 Russia, 🇮🇳 India, 🇩🇪 Germany, 🇨🇦 Canada, 🇹🇷 Turkey

# Autotest
♻️ ALL = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=.*

# Ad/Privacy
🛑 Ad-Block = select, REJECT, 🌐 Global-Direct

# App-specific
AI = select, 🇺🇸 UnitedStates, 🇬🇧 UnitedKingdom, 🇩🇪 Germany, 🇨🇦 Canada, 🇸🇬 Singapore, 🇯🇵 Japan
Telegram = select, 🚀 Strategy-Select, 🇭🇰 HongKong, 🇺🇸 UnitedStates, 🇸🇬 Singapore, 🇯🇵 Japan, 🇨🇳 Taiwan, 🇬🇧 UnitedKingdom, 🇰🇷 Korea, 🇹🇷 Turkey, 🇮🇳 India, 🇷🇺 Russia
Twitter = select,🚀 STRATEGY-SELECT,🇭🇰 HONGKONG,🇺🇸 UNITEDSTATES,🇸🇬 SINGAPORE,🇯🇵 JAPAN,🇨🇳 TAIWAN,🇬🇧 UNITEDKINGDOM,🇰🇷 KOREA,🇹🇷 TURKEY,🇮🇳 INDIA,🇷🇺 RUSSIA,policy-select-name=🇭🇰 HONGKONG

# Media (restored fine-grained groups)
YouTube = select, 🚀 Strategy-Select, 🇭🇰 HongKong, 🇺🇸 UnitedStates, 🇸🇬 Singapore, 🇯🇵 Japan, 🇨🇳 Taiwan, 🇬🇧 UnitedKingdom, 🇰🇷 Korea, 🇹🇷 Turkey, 🇮🇳 India, 🇷🇺 Russia
China-Media = select, 🌐 Global-Direct, 🇭🇰 HongKong, 🇨🇳 Taiwan

# China apps

# Enterprise
Microsoft = select, 🌐 Global-Direct, 🚀 Strategy-Select, 🇭🇰 HongKong, 🇺🇸 UnitedStates, 🇸🇬 Singapore, 🇯🇵 Japan, 🇨🇳 Taiwan, 🇬🇧 UnitedKingdom, 🇰🇷 Korea, 🇹🇷 Turkey, 🇮🇳 India, 🇷🇺 Russia
Apple = select, 🌐 Global-Direct, 🚀 Strategy-Select, 🇭🇰 HongKong, 🇺🇸 UnitedStates, 🇸🇬 Singapore, 🇯🇵 Japan, 🇨🇳 Taiwan, 🇬🇧 UnitedKingdom, 🇰🇷 Korea, 🇹🇷 Turkey, 🇮🇳 India, 🇷🇺 Russia

# Gaming
Game = select, 🌐 Global-Direct, 🚀 Strategy-Select, 🇭🇰 HongKong, 🇺🇸 UnitedStates, 🇸🇬 Singapore, 🇯🇵 Japan, 🇨🇳 Taiwan, 🇬🇧 UnitedKingdom, 🇰🇷 Korea, 🇹🇷 Turkey, 🇮🇳 India, 🇷🇺 Russia

# Cloud drives
Cloud-Drive = select, 🌐 Global-Direct, 🚀 Strategy-Select

# Google (new)
Google = select, 🇺🇸 UnitedStates, 🇭🇰 HongKong, 🇯🇵 Japan, 🇸🇬 Singapore, 🇨🇳 Taiwan, 🇬🇧 UnitedKingdom, 🇩🇪 Germany, 🇨🇦 Canada

# Regions (flags + English)
🇭🇰 HongKong = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=港|HK|Hong\s*Kong
🇨🇳 Taiwan = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=台|TW|Taiwan|台灣
🇯🇵 Japan = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=日本|JP|Japan|东京|大阪|埼玉|名古屋
🇸🇬 Singapore = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=新加坡|狮城|SG|Singapore
🇺🇸 UnitedStates = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=美国|US|United\s*States|洛杉矶|硅谷|圣何塞|西雅图|达拉斯|纽约
🇬🇧 UnitedKingdom = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=英国|UK|United\s*Kingdom|伦敦|曼彻斯特|利兹|伯明翰|爱丁堡|格拉斯哥
🇰🇷 Korea = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=韩国|KR|Korea|首尔|釜山
🇷🇺 Russia = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=俄罗斯|RU|Russia|莫斯科|圣彼得堡|新西伯利亚|喀山
🇮🇳 India = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=印度|IN|India|孟买|新德里|班加罗尔|海得拉巴
🇩🇪 Germany = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=德国|DE|Germany|柏林|慕尼黑|法兰克福|汉堡|科隆
🇨🇦 Canada = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=加拿大|CA|Canada|多伦多|温哥华|蒙特利尔|渥太华|卡尔加里
🇹🇷 Turkey = url-test, url=http://www.gstatic.com/generate_204, interval=600, tolerance=120, timeout=5, policy-regex-filter=土耳其|TR|Turkey

# Direct group
🌐 Global-Direct = select, DIRECT

[Rule]
# 0) Basic direct
DOMAIN-SUFFIX,local,DIRECT
DOMAIN-SUFFIX,localhost,DIRECT

# 1) Ad/Privacy (highest priority)
RULE-SET,https://whatshub.top/rule/AntiAD.list,🛑 AD-BLOCK
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/AdGuardDNS/AdGuardDNS.list,🛑 AD-BLOCK
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/AdAway/AdAway.list,🛑 AD-BLOCK

# 2) China direct (incl. domestic media)
DOMAIN-KEYWORD,binance,DIRECT
RULE-SET,https://whatshub.top/rule/AliPay.list,DIRECT
RULE-SET,https://whatshub.top/rule/Alibaba.list,DIRECT
RULE-SET,https://whatshub.top/rule/IPs-CN.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/XiaoHongShu/XiaoHongShu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Binance/Binance.list,DIRECT
RULE-SET,https://whatshub.top/rule/WeChat.list,🌐 GLOBAL-DIRECT
# Domestic media/video
RULE-SET,https://whatshub.top/rule/ChinaMedia.list,CHINA-MEDIA
RULE-SET,https://whatshub.top/rule/Douyu.list,CHINA-MEDIA
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/iQIYI/iQIYI.list,CHINA-MEDIA
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Youku/Youku.list,CHINA-MEDIA
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TencentVideo/TencentVideo.list,CHINA-MEDIA
RULE-SET,https://whatshub.top/rule/ASN-CN.list,🌐 GLOBAL-DIRECT

# 3) Cloud drives (direct by default)
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/BaiduNetdisk/BaiduNetdisk.list,CLOUD-DRIVE
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Quark/Quark.list,CLOUD-DRIVE
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/AliyunDrive/AliyunDrive.list,CLOUD-DRIVE
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Xunlei/Xunlei.list,CLOUD-DRIVE
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/115/115.list,CLOUD-DRIVE

# 4) Gaming
DOMAIN-KEYWORD,steam,GAME
DOMAIN-KEYWORD,epic,GAME
DOMAIN-KEYWORD,origin,GAME
DOMAIN-KEYWORD,uplay,GAME
DOMAIN-KEYWORD,battle,GAME

# 5) Study/Work
DOMAIN-KEYWORD,coursera,🚀 STRATEGY-SELECT
DOMAIN-KEYWORD,udemy,🚀 STRATEGY-SELECT
DOMAIN-KEYWORD,edx,🚀 STRATEGY-SELECT
DOMAIN-KEYWORD,notion,🚀 STRATEGY-SELECT
DOMAIN-KEYWORD,slack,🚀 STRATEGY-SELECT
DOMAIN-KEYWORD,zoom,🚀 STRATEGY-SELECT

# 6) AI services
DOMAIN-KEYWORD,chatgpt,AI
DOMAIN-KEYWORD,claude,AI
DOMAIN-KEYWORD,gemini,AI
DOMAIN-KEYWORD,perplexity,AI
DOMAIN-KEYWORD,openai,AI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/OpenAI/OpenAI.list,AI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Gemini/Gemini.list,AI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Anthropic/Anthropic.list,AI

# 7) Media (foreign platform groups restored)
DOMAIN-KEYWORD,youtube,YOUTUBE
RULE-SET,https://whatshub.top/rule/YouTube.list,YOUTUBE
RULE-SET,https://whatshub.top/rule/YouTubeMusic.list,YOUTUBE
RULE-SET,https://whatshub.top/rule/Netflix.list,NETFLIX
RULE-SET,https://whatshub.top/rule/Disney.list,DISNEY+
RULE-SET,https://whatshub.top/rule/Spotify.list,SPOTIFY
RULE-SET,https://whatshub.top/rule/Twitch.list,FOREIGN-MEDIA
RULE-SET,https://whatshub.top/rule/BiliBili.list,CHINA-MEDIA
RULE-SET,https://whatshub.top/rule/ProxyMedia.list,FOREIGN-MEDIA
DOMAIN-SUFFIX,api.bilibili.com,CHINA-MEDIA

# 8) Social
RULE-SET,https://whatshub.top/rule/Telegram.list,TELEGRAM
RULE-SET,https://whatshub.top/rule/Weibo.list,WEIBO
DOMAIN-KEYWORD,weibo,WEIBO
RULE-SET,https://whatshub.top/rule/Twitter.list,TWITTER
RULE-SET,https://whatshub.top/rule/Facebook.list,FACEBOOK
RULE-SET,https://whatshub.top/rule/Reddit.list,REDDIT
RULE-SET,https://whatshub.top/rule/Discord.list,DISCORD

# 9) Others (dev/pay/enterprise)
# (Google 系放到“Google”组，便于独立切换；其余保持不变)
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,GOOGLE
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GitHub/GitHub.list,🇭🇰 HONGKONG
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Copilot/Copilot.list,🇺🇸 UNITEDSTATES
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GoogleVoice/GoogleVoice.list,🇺🇸 UNITEDSTATES
RULE-SET,https://whatshub.top/rule/Microsoft.list,MICROSOFT
RULE-SET,https://whatshub.top/rule/Apple.list,APPLE
RULE-SET,https://whatshub.top/rule/AppStore.list,APPLE
RULE-SET,https://whatshub.top/rule/AppleProxy.list,🚀 STRATEGY-SELECT
RULE-SET,https://whatshub.top/rule/PayPal.list,PAYPAL
RULE-SET,https://whatshub.top/rule/Proxy.list,🚀 STRATEGY-SELECT

# 10) Fallback
GEOIP,CN,🌐 GLOBAL-DIRECT
FINAL,🚀 STRATEGY-SELECT

[URL Rewrite]
^https?://(www\.)?g\.cn https://www.google.com 302
^https?://(www\.)?google\.cn https://www.google.com 302
^https?://(www\.)?google\.com\.hk https://www.google.com 302
^https?://(www\.)?youtube\.com/redirect https://www.youtube.com 302
^https?://(www\.)?youtu\.be/(.*) https://www.youtube.com/watch?v=$2 302

[MITM]
hostname = 
enable = false